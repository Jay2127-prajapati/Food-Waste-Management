<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration Form</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap">
    <link rel="stylesheet" href="./CSS/restruent.css">
</head>

<body>
    <div class="container-registration-form">
        <div class="student-section-information">
            <h2 class="form-heading">Restrurent</h2>

            <form id="resform">
                <div class="form-group">
                    <label for="first-name">Restaurant Name:</label>
                    <input type="text" id="orgname" name="first-name" placeholder="Enter Restrurent Name">
                </div>

                <div class="form-group">
                    <label for="middle-name">Contact Person Name:</label>
                    <input type="text" id="ownername" name="middle-name" placeholder="Enter Your Name">
                </div>

                <div class="form-group">
                    <label for="phone-number">Phone Number:</label>
                    <input type="tel" id="ownercontact" name="phone-number" placeholder="Enter Phone Number">
                </div>

                <div class="form-group">
                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="email" placeholder="Enter Email Address">
                </div>

                <div class="form-group">
                    <label for="address">Address:</label>
                    <textarea id="address" name="address" placeholder="Enter Address"></textarea>
                </div>

                <div class="form-group">
                    <label for="parents-name">Website :</label>
                    <input type="text" id="url" name="parents-name" placeholder="Enter Website URL/Name">
                </div>

                <div class="form-group">
                    <label for="parents-info">Description :</label>
                    <textarea id="description" name="parents-info"
                        placeholder="Enter Description Of Your Restrurent"></textarea>
                </div>

                <input type="submit" value="Submit" class="submit-button">
        </div>
        </form>
    </div>

    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
        import { getDatabase, ref, child, get, update } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA7DrMVwr7gg_V5IDgeMf8PGsXL7O1O6ik",
            authDomain: "food-waste-management-fb700.firebaseapp.com",
            databaseURL: "https://food-waste-management-fb700-default-rtdb.firebaseio.com",
            projectId: "food-waste-management-fb700",
            storageBucket: "food-waste-management-fb700.appspot.com",
            messagingSenderId: "385689207472",
            appId: "1:385689207472:web:fd75cae52bc02515553175",
            measurementId: "G-73M42PBH1L"
        };


        const app = initializeApp(firebaseConfig);
        const db = getDatabase();


        let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"));
        let UserInfo = JSON.parse(sessionStorage.getItem("user-info"));
        let MainForm = document.getElementById('resform');
        let orgname = document.getElementById("orgname");
        let ownername = document.getElementById("ownername");
        let ownercontact = document.getElementById("ownercontact");
        let email = document.getElementById("email");
        let address = document.getElementById("address");
        let url = document.getElementById("url");
        let description = document.getElementById("description");


        let UpdateData = evt => {

            evt.preventDefault();
            update(ref(db, 'UserAuthList/' + UserCreds.uid), {
                orgname : orgname.value,
                ownername : ownername.value,
                ownercontact : ownercontact.value,
                email : email.value,
                address : address.value,
                url : url.value,
                description : description.value,

            }).catch((error) => {
                alert("something Went Wrong");
                console.log(error);
            });

            setTimeout(transfer, 2000);

        }

        function transfer(){
            window.location.href = "/../login-signup.html"
        }
        
        MainForm.addEventListener('submit', UpdateData);

    </script>
</body>

</html>